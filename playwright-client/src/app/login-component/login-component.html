<div class="login-container">
  <div class="form-section">

    <!-- Greetings and Branding -->
    <div class="greetings-section">
      <div class="branding">
        <img src="assets/images/riskonnectLogo.webp" alt="Logo" class="logo" />
        <span class="brand-name">Riskonnect</span>
      </div>
      <div class="greeting-text">
        <h4>Welcome Back!</h4>
        <p>Good luck finding those pesky bugs...</p>
      </div>
    </div>

    <!-- Login and Signup Form button switch -->
    <div class="login-signup">
      <button
        class="btn signin"
        (click)="setActiveForm('signIn')"
        [ngClass]="{
          'btn-primary': activeForm === 'signIn',
          'btn-secondary': activeForm !== 'signIn'
        }"
      >
        Sign In
      </button>
      <button
        class="btn signup"
        (click)="setActiveForm('signUp')"
        [ngClass]="{
          'btn-primary': activeForm === 'signUp',
          'btn-secondary': activeForm !== 'signUp'
        }"
      >
        Sign Up
      </button>
    </div>

    <!-- Authentication Form -->
    <form #authForm="ngForm" class="auth-form" (ngSubmit)="onSubmit(authForm)" appPasswordMatcher>
      @if(activeForm === 'signIn'){
      <div class="form-group" animate.enter="enter-animation">
        <!--Organization Field-->
        <input
          type="text"
          class="form-control"
          placeholder="Organization"
          ngModel
          required>
        <br/>

        <!--Username or Email Field-->
        <input
          type="text"
          class="form-control"
          placeholder="User name or email"
          name="userNameorEmail"
          ngModel
          required="userNameorEmail"
        /><br />

        <!--Password Field-->
        <div class="password-wrapper">
          <input
            [type]="passwordVisible ? 'text' : 'password'"
            class="form-control"
            placeholder="Password"
            name="password"
            ngModel
            required
          />
          <span class="toggle-password" (click)="togglePasswordVisibility()">
            @if(passwordVisible){
            <i class="fas fa-eye-slash"></i>
            } @else {<i class="fas fa-eye"></i>}
          </span>
        </div>
      </div>
      } @else {
        <!-- Sign Up Form -->
      <div class="form-group" animate.enter="enter-animation">

        <!--User Name Field-->
        <input
          type="text"
          placeholder="User Name"
          class="form-control"
          name="userName"
          ngModel
        /><br />

        <!--Email Field-->
        <input
          type="email"
          placeholder="Email"
          class="form-control"
          name="email"
          ngModel
          required
          #emailField="ngModel"
          email
        />
        @if(emailField.invalid && (emailField.dirty || emailField.touched)){
        <div class="error-text text-danger" style="margin-left: 13px;">
          @if(emailField.errors?.['required']){
          <small>Email is required.</small>
          } @if(emailField.errors?.['email']){
          <small>Invalid email format.</small>
          }
        </div>
        }
        <br />

        <!--Organization Field-->
        <input
          type="text"
          placeholder="Organization"
          class="form-control"
          name="organization"
          ngModel
        /><br />

        <!--Password Field-->
        <div class="password-wrapper">
          <input
            [type]="passwordVisible ? 'text' : 'password'"
            class="form-control"
            placeholder="Password"
            name="password"
            ngModel
            required
            minlength="6"
            #passwordField="ngModel"
          />
          <span class="toggle-password" (click)="togglePasswordVisibility()">
            @if(passwordVisible){
            <i class="fas fa-eye-slash"></i>
            } @else {<i class="fas fa-eye"></i>}
          </span>
        </div>
        @if(passwordField.invalid && (passwordField.dirty || passwordField.touched)){
        <div class="error-text text-danger">
          @if(passwordField.errors?.['required']){
          <small>Password is required.</small>
          } @if(passwordField.errors?.['minlength']){
          <small>Password must be at least 6 characters long.</small>
          }
        </div>
        }
        <br />

        <!--Confirm Password Field-->
        <div class="password-wrapper">
          <input
            [type]="passwordVisible ? 'text' : 'password'"
            class="form-control"
            placeholder="Confirm Password"
            name="confirmPassword"
            ngModel
            required
            #confirmPasswordField="ngModel"
          />
          <span class="toggle-password" (click)="togglePasswordVisibility()">
            @if(passwordVisible){
            <i class="fas fa-eye-slash"></i>
            } @else {<i class="fas fa-eye"></i>}
          </span>
        </div>

        @if(confirmPasswordField.invalid && (confirmPasswordField.dirty ||
        confirmPasswordField.touched)){
        <div class="error-text text-danger">
          @if(confirmPasswordField.errors?.['required']){
          <small>Password is required.</small>
          } @if(confirmPasswordField.errors?.['mustMatch']){
          <small>Passwords must match.</small>
          }
        </div>
        }
      </div>
      }

      <!--Action Buttons-->
      <div class="action-btn">
        <button class="btn" type="submit" [disabled]="authForm.invalid">
          {{ activeForm === 'signIn' ? 'Log In' : 'Sign Up' }}
        </button>
      </div>
    </form>
  </div>
  <div class="img-section"></div>
</div>
